<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	</head>
	<body>
		<p>Click the button to display a random number between 1 and 100.</p>
		<button onclick="dot()">Crypt</button>
		<p id="results"></p>
		<script>
			function dot() {
				valor = primera_llamada("c4ca4238a0b923820dcc509a6f75849b");
				console.log(valor);
		    }

		    function encrypt() {
			    var valor = Math.floor((Math.random() * 2) + 1);
			    var dec;
			    var res = "";
			    for (i = 0; i < 32; i++) {
				    if (Math.floor((Math.random() * 2) + 0)) {
				    	dec = Math.floor((Math.random() * 10) + 48);
				    } else {
				    	if (Math.floor((Math.random() * 2) + 0)) {
				    		dec = Math.floor((Math.random() * 26) + 65);
				    	} else {
				    		dec = Math.floor((Math.random() * 26) + 97);
				    	}
				    }				    
				    res += String.fromCharCode(dec);
				}
				return res;
			}

			// La Solicitud Ajax simulada "primera_llamada" (nombre de fantasia)
			// random: Valor que creas como cliente (Necesario).
			// solicitud: Valor que te entregue al momento de hacer la descarga

			function primera_llamada(solicitud) {
				var res = encrypt();
				// alert(res);
				// c4ca4238a0b923820dcc509a6f75849b solicitud que puedes usar
				$.ajax({
				  	type: "POST",
					url: "ajax.php",
					data: { random: res, solicitud: solicitud },
					success: function(data) {
						return data;
					}
				});
			}
		</script>
	</body>
</html>